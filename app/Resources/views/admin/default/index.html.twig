{% extends 'base.html.twig' %}

{% import _self as macro %}

{% macro connectionRequestRow(connectionRequest, inputName, isChecked) %}
    <div class="col-md-3 col-sm-3">
        <div class="testimonial-content t-one">
            <h4>
                <img
                    style="width:50px"
                    src="{% if connectionRequest.user.profilePicture -%}
                        {{ connectionRequest.user.profilePicture }}
                        {%- else -%}
                        /images/testimonials/dorry-mahlin.jpg
                        {%- endif %}"
                    alt=""
                    class="img-responsive img-circle"
                 />{{ connectionRequest.user.name }}, <span>{{ connectionRequest.user.age }} år</span>
            </h4>
            <blockquote class="br-orange">
                <p>
                    <input name="{{ inputName }}" value="{{ connectionRequest.id }}" type="radio"
                        {% if isChecked %}checked="checked"{% endif %}
                    >
                    {% for category in connectionRequest.user.categories %}
                        {{ category.name }}{% if not loop.last %}, {% endif %}
                    {% endfor %}
                    <br>
                    "<em>{{ connectionRequest.comment|nl2br }}</em>"
                </p>
            </blockquote>
        </div>
    </div>
{% endmacro %}

{% block body %}


<div class="inner-page testimonial">
    <div class="container">

            <div class="inner-tab">
                <ul class="nav nav-tabs">
                    {% for loopedCity in cities %}
                        <li{% if loopedCity == city %} class="active"{% endif %}>
                            <a href="{{ path('admin_start', {'id': loopedCity.id}) }}">{{ loopedCity.name }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </div>

        <div class="inner-testimonial">


            <form method="POST" action="">
                <h2>Vill förbättra svenskan</h2>
                <div class="row">
                    {% for connectionRequest in learners %}
                        {{ macro.connectionRequestRow(connectionRequest, 'learner', loop.first) }}
                    {% endfor %}
                </div>
                <h2 style="clear:both">Vill hjälpa någon att förbättra svenskan</h2>
                <div class="row">
                    {% for connectionRequest in fluentSpeakers %}
                        {{ macro.connectionRequestRow(connectionRequest, 'fluentSpeaker', loop.first) }}
                    {% endfor %}
                </div>

                <p style="clear:both">
                    <input type="submit"
                        {% if learners|length == 0 or fluentSpeakers|length == 0 %}disabled="disabled"{% endif %}
                        class="btn btn-default"
                    >
                </p>

            </form>
        </div>
    </div>
</div>

{% endblock %}
